<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Run sensitivity analysis for the randomized moderator placement design — prepost_sens • prepost</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Run sensitivity analysis for the randomized moderator placement design — prepost_sens"><meta name="description" content="Run sensitivity analysis for the randomized moderator placement design"><meta property="og:description" content="Run sensitivity analysis for the randomized moderator placement design"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">prepost</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/prepost.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mattblackwell/prepost/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Run sensitivity analysis for the randomized moderator placement design</h1>
      <small class="dont-index">Source: <a href="https://github.com/mattblackwell/prepost/blob/main/R/prepost_bounds.R" class="external-link"><code>R/prepost_bounds.R</code></a></small>
      <div class="d-none name"><code>prepost_sens.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Run sensitivity analysis for the randomized moderator placement design</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">prepost_sens</span><span class="op">(</span></span>
<span>  <span class="va">formula</span>,</span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">moderator</span>,</span>
<span>  <span class="va">prepost</span>,</span>
<span>  <span class="va">g_by</span>,</span>
<span>  <span class="va">g_at</span>,</span>
<span>  <span class="va">t_by</span>,</span>
<span>  <span class="va">t_at</span>,</span>
<span>  sims <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  stable_mod <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  conf_level <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  moderator_mono <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  outcome_mono <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  tau <span class="op">=</span> <span class="fl">0.25</span>,</span>
<span>  progress <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  solver <span class="op">=</span> <span class="st">"Rglpk"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-formula">formula<a class="anchor" aria-label="anchor" href="#arg-formula"></a></dt>
<dd><p>A formula with syntax <code>y ~ t</code>, where <code>y</code> is the
(unquoted) name of the outcome and <code>t</code> is the (unquoted) name of the treatment.</p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data.frame containing variables in the formula, moderator, and covariates arguments.</p></dd>


<dt id="arg-moderator">moderator<a class="anchor" aria-label="anchor" href="#arg-moderator"></a></dt>
<dd><p>A one-sided formuala with syntax <code>~ d</code>, where <code>d</code>
is the (unquoted) name of the  moderator variable for the CATE.</p></dd>


<dt id="arg-prepost">prepost<a class="anchor" aria-label="anchor" href="#arg-prepost"></a></dt>
<dd><p>A one-sided formula with syntax ~ z, where z is the indicator variable for whether the moderator was measured pre- or post-treatment.</p></dd>


<dt id="arg-g-by">g_by<a class="anchor" aria-label="anchor" href="#arg-g-by"></a></dt>
<dd><p>Numeric indicating the grid spacing for the
\(\gamma\) parameter that places an upper bound on the proportion
of units whose moderator is affected by treatment.</p></dd>


<dt id="arg-g-at">g_at<a class="anchor" aria-label="anchor" href="#arg-g-at"></a></dt>
<dd><p>Vector specifying what values to set the \(\gamma\) parameter
to in the sensitivity analysis. Overrides <code>g_by</code>.</p></dd>


<dt id="arg-t-by">t_by<a class="anchor" aria-label="anchor" href="#arg-t-by"></a></dt>
<dd><p>Numeric indicating the grid spacing for the
\(\theta\) parameter that restricts what proportion of units have
their outcomes affected by the pre vs post-measurement of the
moderator.</p></dd>


<dt id="arg-t-at">t_at<a class="anchor" aria-label="anchor" href="#arg-t-at"></a></dt>
<dd><p>Vector specifying what values to set the \(\theta\) parameter
to in the sensitivity analysis. Overrides <code>t_by</code>.</p></dd>


<dt id="arg-sims">sims<a class="anchor" aria-label="anchor" href="#arg-sims"></a></dt>
<dd><p>An integer indicating the number of simulations for the
bootstrap confidence intervals for the bounds.</p></dd>


<dt id="arg-stable-mod">stable_mod<a class="anchor" aria-label="anchor" href="#arg-stable-mod"></a></dt>
<dd><p>A logical value indicating if the bounds should
assume that the moderator is unaffected by pre-vs-post measurement
under the control condition.</p></dd>


<dt id="arg-conf-level">conf_level<a class="anchor" aria-label="anchor" href="#arg-conf-level"></a></dt>
<dd><p>A numeric indicating the confidence level for the
bootstrap confidence intervals.</p></dd>


<dt id="arg-moderator-mono">moderator_mono<a class="anchor" aria-label="anchor" href="#arg-moderator-mono"></a></dt>
<dd><p>A integer or vector of length 2 indicating
if the bounds should assume monotonicity of the effect of the
post-test on the moderator with <code>1</code> indicating that the post-test
effect is positive and <code>-1</code> indicating that it is negative. The
vector of length 2 allows the monotonicity assumption to vary by
treatment status with the first entry being for control and the
second for treated.</p></dd>


<dt id="arg-outcome-mono">outcome_mono<a class="anchor" aria-label="anchor" href="#arg-outcome-mono"></a></dt>
<dd><p>A integer or vector of length 2 indicating
if the bounds should assume monotonicity of the effect of the
post-test on the outcome with <code>1</code> indicating that the post-test
effect is positive and <code>-1</code> indicating that it is negative. The
vector of length 2 allows the monotonicity assumption to vary by
treatment status with the first entry being for control and the
second for treated.</p></dd>


<dt id="arg-tau">tau<a class="anchor" aria-label="anchor" href="#arg-tau"></a></dt>
<dd><p>A numeric indicating how close the the moment conditions of the
estimated bounds have to be from the minimum values in the sample. This
allows us to obtain bounds and confidence intevals even when the
assumptions are slightly violated due to sampling.</p></dd>


<dt id="arg-progress">progress<a class="anchor" aria-label="anchor" href="#arg-progress"></a></dt>
<dd><p>A logical indicating if progress bars should be
displayed. Defaults to TRUE.</p></dd>


<dt id="arg-solver">solver<a class="anchor" aria-label="anchor" href="#arg-solver"></a></dt>
<dd><p>A character indicating what linear programming solver to use:
"Rglpk" (the default) or "lpSolve".</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list object containing sensitivity output.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">land_experiment</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">prepost_sens</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">support</span> <span class="op">~</span> <span class="va">treat_comb</span>,</span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">land_experiment</span>,</span></span>
<span class="r-in"><span>  moderator <span class="op">=</span> <span class="op">~</span> <span class="va">land_insecure</span>,</span></span>
<span class="r-in"><span>  prepost <span class="op">=</span>  <span class="op">~</span> <span class="va">prepost</span>,</span></span>
<span class="r-in"><span>  g_by <span class="op">=</span> <span class="fl">0.1</span>,</span></span>
<span class="r-in"><span>  t_at <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.25</span>, <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  sims <span class="op">=</span> <span class="fl">50</span>,</span></span>
<span class="r-in"><span>  moderator_mono <span class="op">=</span> <span class="cn">NULL</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0% |==                  | 100%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0% |====                | 100%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0% |======              | 100%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0% |========            | 100%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0% |==========          | 100%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0% |============        | 100%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0% |==============      | 100%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0% |================    | 100%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0% |==================  | 100%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0% |====================| 100%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   gamma theta      lower     upper   ci_lower ci_upper criterion</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   0.0  0.25  0.1376317 0.8234099 -0.2697325 1.226511  1.313678</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   0.1  0.25 -0.1337292 0.9167178 -0.6069104 1.323158  0.000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   0.0  1.00  0.1376317 0.8234099 -0.4443062 1.245560  1.313678</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   0.1  1.00 -0.5128848 1.0787868 -0.9211337 1.298544  0.000000</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Matthew Blackwell, Jacob Brown, Sophie Hill, Kosuke Imai, Teppei Yamamoto.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

